<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Extraction features from images" href="feature_extraction.html" /><link rel="prev" title="Dynamic imports" href="dynamic_imports.html" />

    <meta name="generator" content="sphinx-4.3.1, furo 2021.11.23"/>
        <title>Applying image transforms - serotiny 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">serotiny 0.0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">serotiny 0.0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">serotiny CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_imports.html">Dynamic imports</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Applying image transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_extraction.html">Extraction features from images</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframe_transforms.html">Dataframe wrangling</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_zoo.html">Model zoo</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_workflows.html">Example workflows</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="modules.html">Package modules</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="serotiny.html">serotiny package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.data.html">serotiny.data package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.data.dataframe.html">serotiny.data.dataframe package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.data.image.html">serotiny.data.image package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="serotiny.datamodules.html">serotiny.datamodules package</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.io.html">serotiny.io package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.io.dataframe.html">serotiny.io.dataframe package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.io.dataframe.loaders.html">serotiny.io.dataframe.loaders package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="serotiny.losses.html">serotiny.losses package</a></li>
<li class="toctree-l3"><a class="reference internal" href="serotiny.metrics.html">serotiny.metrics package</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.models.html">serotiny.models package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.models.callbacks.html">serotiny.models.callbacks package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.models.unet.html">serotiny.models.unet package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.models.vae.html">serotiny.models.vae package</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.networks.html">serotiny.networks package</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.networks.basic_cnn.html">serotiny.networks.basic_cnn package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.networks.layers.html">serotiny.networks.layers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.networks.mlp.html">serotiny.networks.mlp package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.networks.unet.html">serotiny.networks.unet package</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.networks.utils.html">serotiny.networks.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="serotiny.utils.html">serotiny.utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="applying-image-transforms">
<h1>Applying image transforms<a class="headerlink" href="#applying-image-transforms" title="Permalink to this headline">¶</a></h1>
<p>A common step in an image-centric workflow is transforming the input images
(resizing, padding, registering, normalizing, applying dillations and
other filters…).</p>
<p>For this, we provide a CLI utility that enables complex and flexible image
transformations to be applied to a dataset of images. Our starting point is
a manifest file (e.g. a <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file) which contains (at least) a column
with paths to the images in the dataset.</p>
<p>The general structure of the CLI call is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">serotiny</span> <span class="n">image</span> <span class="n">transform</span> \
    <span class="o">--</span><span class="n">input_manifest</span><span class="o">=</span><span class="n">my_manifest</span><span class="o">.</span><span class="n">csv</span> \
    <span class="o">--</span><span class="n">output_path</span><span class="o">=</span><span class="n">output_manifest</span><span class="o">.</span><span class="n">csv</span> \
    <span class="o">--</span><span class="n">transforms_to_apply</span><span class="o">=</span><span class="n">example</span><span class="o">.</span><span class="n">yaml</span><span class="p">:</span><span class="n">crop_and_normalize</span><span class="o">.</span><span class="n">transforms</span> \ <span class="c1"># we will dive into this YAML file ahead</span>
    <span class="o">--</span><span class="n">outputs</span><span class="o">=</span><span class="n">example</span><span class="o">.</span><span class="n">yaml</span><span class="p">:</span><span class="n">crop_and_normalize</span><span class="o">.</span><span class="n">outputs</span> \
    <span class="o">--</span><span class="n">index_col</span><span class="o">=</span><span class="s2">"cell_id"</span> \<span class="c1"># the index col is used for the image filenames</span>
    <span class="c1"># --include_cols=... \ # optional. to include other columns in the output manifest</span>
    <span class="c1"># --image_reader=aicsimageio.readers.ome_tiff_reader.OmeTiffReader \ # optional. avoids an initial io operation to select what type of reader to use.</span>
    <span class="c1"># --backend="multiprocessing" \ # optional. select which parallel backend to use</span>
    <span class="c1"># --return_merged=True \ # optional. whether to merge the results with the input</span>
    <span class="c1"># --write_every_n_rows=100 \ # optional. number of iterations to save to disk at once</span>
    <span class="c1"># --n_workers=10 \ # optional. process multiple images in parallel</span>
    <span class="c1"># --verbose=False \ # optional. produce command line output</span>
    <span class="c1"># --skip_if_exists=False \ # optional. whether to try to retrieve results from an unfinished run and continue from there</span>
    <span class="c1"># --debug=False \ # optional. whether to return errors in csv instead of raising and breaking</span>
</pre></div>
</div>
<div class="section" id="configuring-transforms-to-apply">
<h2>Configuring <code class="docutils literal notranslate"><span class="pre">transforms_to_apply</span></code><a class="headerlink" href="#configuring-transforms-to-apply" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">transforms_to_apply</span></code> is where the whole transform pipeline is specified.
It relies on <code class="docutils literal notranslate"><span class="pre">serotiny</span></code>’s <a class="reference internal" href="dynamic_imports.html"><span class="doc">dynamic import functionality</span></a>
to provide very flexible transform pipelines. As described in the <a class="reference internal" href="cli.html"><span class="doc">CLI page</span></a>,
a config can either be provided directly in the command line, or it can be given
as a YAML file, or part of one. In any of those cases, the <code class="docutils literal notranslate"><span class="pre">transforms_to_apply</span></code>
config is a dictionary, containing the several transforms needed to obtain the output image. Logically,
the order matters, and the last step describes the final result.</p>
<p>Each step can either depend on a path column given in the input dataframe (note: your input
dataframe can input several path columns which can all be used here), or it can depend on the
result of one (or multiple) intermediate transform(s). To enable this behaviour, each
transform must be given a name. Additionally, each transform also contains a <code class="docutils literal notranslate"><span class="pre">steps</span></code>
field, which is the sequence of steps that make up that that transform, in order. This
can either be a dictionary or a list, and in both cases the order matters.</p>
<p>A transform must specify its <code class="docutils literal notranslate"><span class="pre">input</span></code> field as a dictionary, where each key is
either a column in the dataframe or the name of a previous transform, and each
corresponding value is the list of channels to use from the input given by its key</p>
<p>A special keyword <code class="docutils literal notranslate"><span class="pre">^unpack</span></code> can be used, in cases where a step depends on
multiple input images and the underlying function expects multiple input arguments
(e.g. <code class="docutils literal notranslate"><span class="pre">numpy.concatenate</span></code>). This corresponds to applying the * operator to
the image list.</p>
<p>In general, steps are configured equivalently for every input image. However if
a given step requires per-image parameters, a special argument <code class="docutils literal notranslate"><span class="pre">^individual_args</span></code>
can be given, which is a dict containing as keys the function’s required keyword
arguments, and as values the corresponding columns in the dataframe which contain the
needed data.</p>
</div>
<div class="section" id="specifying-outputs">
<h2>Specifying <code class="docutils literal notranslate"><span class="pre">outputs</span></code><a class="headerlink" href="#specifying-outputs" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">outputs</span></code> is the parameter that lets the tool know what outputs and channels to store
from the transforms applied. It allows multiple outputs to be stored, which is convenient
if we are interested in different outputs which share a common initial transformation.
This parameter is simply a dictionary where each key is the name of a transform in the pipeline,
(i.e. corresponds to a key in the <code class="docutils literal notranslate"><span class="pre">transforms_to_apply</span></code> dictionary) and the corresponding
value is a list of the channels to store for that key.</p>
</div>
<div class="section" id="example-transform-pipeline-with-comments">
<h2>Example transform pipeline (with comments)<a class="headerlink" href="#example-transform-pipeline-with-comments" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">crop_and_normalize</span><span class="p">:</span>
  <span class="nt">transforms</span><span class="p">:</span> <span class="c1"># in the example command above, this is the field passed to the `transforms_to_apply` parameter</span>
    <span class="nt">cropped</span><span class="p">:</span> <span class="c1"># name of this transform. we use it to refer to its output as well</span>
      <span class="nt">input</span><span class="p">:</span>
        <span class="nt">img_path</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">dna_raw</span><span class="p p-Indicator">,</span> <span class="nv">membrane_raw</span><span class="p p-Indicator">,</span> <span class="nv">structure_raw</span><span class="p p-Indicator">,</span> <span class="nv">dna_seg</span><span class="p p-Indicator">,</span> <span class="nv">membrane_seg</span><span class="p p-Indicator">,</span> <span class="nv">structure_seg</span><span class="p p-Indicator">]</span>
      <span class="nt">steps</span><span class="p">:</span> <span class="c1"># specifying the steps for this transform as a dict. in this case, a single step named "crop"</span>
        <span class="nt">crop</span><span class="p">:</span>
          <span class="c1"># a CropCenter transform is instantiated, with cropz, cropx, cropy set to 50,</span>
          <span class="c1"># and with center_of_mass being retrieved from the dataframe column with the</span>
          <span class="c1"># same name.</span>
          <span class="nt">^init</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">serotiny.data.image.CropCenter</span>
          <span class="nt">cropz</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>
          <span class="nt">cropx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>
          <span class="nt">cropy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">50</span>
          <span class="nt">^individual_args</span><span class="p">:</span>
            <span class="nt">center_of_mass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">center_of_mass</span>

    <span class="nt">normalized_raw</span><span class="p">:</span>
      <span class="nt">input</span><span class="p">:</span> <span class="c1"># here the input is the result of a previous transform, and a subset of its channels</span>
        <span class="nt">cropped</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span> <span class="nv">1</span><span class="p p-Indicator">,</span> <span class="nv">2</span><span class="p p-Indicator">]</span>
      <span class="nt">steps</span><span class="p">:</span> <span class="c1"># here we specified the `steps` field as a list</span>
        <span class="p p-Indicator">-</span> <span class="nt">^init</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">serotiny.data.image.MinMaxNormalize</span>
          <span class="nt">clip_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.05</span>
          <span class="nt">clip_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.95</span>
          <span class="nt">clip_quantile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>

    <span class="nt">masked</span><span class="p">:</span>
      <span class="nt">input</span><span class="p">:</span> <span class="c1"># this transform takes in the result of two previous transforms</span>
        <span class="nt">normalized_raw</span><span class="p">:</span> <span class="c1"># if no list of channels is given, all of the channels are used</span>
        <span class="nt">cropped</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">,</span> <span class="nv">4</span><span class="p p-Indicator">,</span> <span class="nv">5</span><span class="p p-Indicator">]</span>
      <span class="nt">steps</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">^bind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">numpy.multiply</span>
          <span class="nt">^unpack</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span> <span class="c1"># using `^unpack` because the underlying function expects multiple inputs</span>


    <span class="nt">concated</span><span class="p">:</span>
      <span class="nt">input</span><span class="p">:</span> <span class="c1"># again, a transform which takes in the result of two previous transforms</span>
        <span class="nt">masked</span><span class="p">:</span>
        <span class="nt">cropped</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">3</span><span class="p p-Indicator">,</span> <span class="nv">4</span><span class="p p-Indicator">,</span> <span class="nv">5</span><span class="p p-Indicator">]</span>
      <span class="nt">steps</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">^bind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">numpy.concatenate</span>
          <span class="nt">axis</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

  <span class="c1"># specifying the outputs. this is the field passed to the `outputs` parameter,</span>
  <span class="c1"># in the example command at the top of the page</span>
  <span class="nt">outputs</span><span class="p">:</span>
    <span class="c1"># we're specifying that the result of `concated` will be saved, with the given</span>
    <span class="c1"># channel names, in the given order</span>
    <span class="nt">concated</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">dna_raw</span><span class="p p-Indicator">,</span> <span class="nv">membrane_raw</span><span class="p p-Indicator">,</span> <span class="nv">structure_raw</span><span class="p p-Indicator">,</span> <span class="nv">dna_seg</span><span class="p p-Indicator">,</span> <span class="nv">membrane_seg</span><span class="p p-Indicator">,</span> <span class="nv">structure_seg</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="feature_extraction.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Extraction features from images</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="dynamic_imports.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Dynamic imports</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021 |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/image_transforms.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Applying image transforms</a><ul>
<li><a class="reference internal" href="#configuring-transforms-to-apply">Configuring <code class="docutils literal notranslate"><span class="pre">transforms_to_apply</span></code></a></li>
<li><a class="reference internal" href="#specifying-outputs">Specifying <code class="docutils literal notranslate"><span class="pre">outputs</span></code></a></li>
<li><a class="reference internal" href="#example-transform-pipeline-with-comments">Example transform pipeline (with comments)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>