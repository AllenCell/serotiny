<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="serotiny CLI" href="cli.html" /><link rel="prev" title="Installation" href="installation.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.03.04"/>
        <title>Getting started - serotiny 0.0.a0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=935aa2abcc5c1da4283d1dc201fb1f0add16d23a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">serotiny 0.0.a0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">serotiny 0.0.a0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">serotiny CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataframe_transforms.html">Dataframe wrangling</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="modules.html">Package modules</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="serotiny.html">serotiny package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.datamodules.html">serotiny.datamodules package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.datamodules.manifest_datamodule.html">serotiny.datamodules.manifest_datamodule module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.io.html">serotiny.io package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.io.dataframe.html">serotiny.io.dataframe package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5 has-children"><a class="reference internal" href="serotiny.io.dataframe.loaders.html">serotiny.io.dataframe.loaders package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l6"><a class="reference internal" href="serotiny.io.dataframe.loaders.abstract_loader.html">serotiny.io.dataframe.loaders.abstract_loader module</a></li>
<li class="toctree-l6"><a class="reference internal" href="serotiny.io.dataframe.loaders.classes.html">serotiny.io.dataframe.loaders.classes module</a></li>
<li class="toctree-l6"><a class="reference internal" href="serotiny.io.dataframe.loaders.columns.html">serotiny.io.dataframe.loaders.columns module</a></li>
<li class="toctree-l6"><a class="reference internal" href="serotiny.io.dataframe.loaders.image.html">serotiny.io.dataframe.loaders.image module</a></li>
<li class="toctree-l6"><a class="reference internal" href="serotiny.io.dataframe.loaders.random_image.html">serotiny.io.dataframe.loaders.random_image module</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.io.dataframe.dataframe_dataset.html">serotiny.io.dataframe.dataframe_dataset module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.io.dataframe.readers.html">serotiny.io.dataframe.readers module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.io.image.html">serotiny.io.image module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.losses.html">serotiny.losses package</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.losses.continuous_bernoulli.html">serotiny.losses.continuous_bernoulli module</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.losses.kl_divergence.html">serotiny.losses.kl_divergence module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.ml_ops.html">serotiny.ml_ops package</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="serotiny.ml_ops.ml_ops.html">serotiny.ml_ops.ml_ops module</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.ml_ops.mlflow_utils.html">serotiny.ml_ops.mlflow_utils module</a></li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.ml_ops.utils.html">serotiny.ml_ops.utils module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.models.html">serotiny.models package</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.models.utils.html">serotiny.models.utils package</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.models.utils.optimizer_utils.html">serotiny.models.utils.optimizer_utils module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.models.vae.html">serotiny.models.vae package</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.models.vae.base_vae.html">serotiny.models.vae.base_vae module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.models.vae.image_vae.html">serotiny.models.vae.image_vae module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.models.vae.tabular_vae.html">serotiny.models.vae.tabular_vae module</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="serotiny.models.base_model.html">serotiny.models.base_model module</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.networks.html">serotiny.networks package</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.networks.basic_cnn.html">serotiny.networks.basic_cnn package</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.basic_cnn.basic_cnn.html">serotiny.networks.basic_cnn.basic_cnn module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.networks.layers.html">serotiny.networks.layers package</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.layers.convolution_block.html">serotiny.networks.layers.convolution_block module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.layers.skip_connection.html">serotiny.networks.layers.skip_connection module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.layers.spatial_pyramid_pool.html">serotiny.networks.layers.spatial_pyramid_pool module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.networks.mlp.html">serotiny.networks.mlp package</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.mlp.mlp.html">serotiny.networks.mlp.mlp module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.networks.utils.html">serotiny.networks.utils package</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.networks.utils.weight_init.html">serotiny.networks.utils.weight_init module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="serotiny.transforms.html">serotiny.transforms package</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.transforms.dataframe.html">serotiny.transforms.dataframe package</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.dataframe.transforms.html">serotiny.transforms.dataframe.transforms module</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="serotiny.transforms.image.html">serotiny.transforms.image package</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.image.crop.html">serotiny.transforms.image.crop module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.image.normalize.html">serotiny.transforms.image.normalize module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.image.pad.html">serotiny.transforms.image.pad module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.image.project.html">serotiny.transforms.image.project module</a></li>
<li class="toctree-l5"><a class="reference internal" href="serotiny.transforms.image.swap.html">serotiny.transforms.image.swap module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="getting-started">
<span id="id1"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h1>
<p>One of <code class="docutils literal notranslate"><span class="pre">serotiny</span></code>’s main purposes is to standardize the structure of ML projects
at our organization. For that, we created <a class="reference external" href="https://github.com/AllenCellModeling/serotiny-project-cookiecutter">a cookiecutter template</a>
for <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> projects, which makes it easier to get started with the right structure in place.</p>
<p><code class="docutils literal notranslate"><span class="pre">serotiny</span></code> has a command-line interface, with machine-learning related
commands which recognize when they are run from within a serotiny project and
are thus able to make use of and interact with each projects configuration, as
you will see ahead.</p>
<p>We recommend becoming familiar with <a class="reference external" href="https://hydra.cc">hydra</a> to better understand
the inner workings of serotiny projects. We rely heavily on <code class="docutils literal notranslate"><span class="pre">hydra</span></code>’s functionality
to <a class="reference external" href="https://hydra.cc/docs/advanced/instantiate_objects/overview/">instantiate Python objects from YAML configurations</a>,
as well as its general framework to configure applications in a modular fashion.</p>
<section id="project-structure">
<h2>Project structure<a class="headerlink" href="#project-structure" title="Permalink to this headline">#</a></h2>
<p>Using <a class="reference external" href="https://github.com/AllenCellModeling/serotiny-project-cookiecutter">our cookiecutter template</a>,
you can create a <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> project as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cookiecutter https://github.com/AllenCellModeling/serotiny-project-cookiecutter
project_name [My Project]: A Tiny Project
package_name [a_tiny_project]:
project_description [a simple project]: it's just a tiny project
</pre></div>
</div>
<p>A folder named <code class="docutils literal notranslate"><span class="pre">a_tiny_project</span></code> will be created, with the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
├── a_tiny_project
│   └── config
│       ├── data
│       ├── mlflow
│       ├── model
│       ├── trainer
│       │   └── callbacks
│       ├── train.yaml
│       ├── test.yaml
│       └── predict.yaml
├── MANIFEST.in
└── setup.py
</pre></div>
</div>
<p>This folder structure is a valid, installable python package. That fact will be
useful later when you want to add custom models and datamodules to your project,
and refer to them in the configuration files, as you will see ahead.</p>
<p>To install your python project, you can run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -e a_tiny_project
</pre></div>
</div>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">#</a></h2>
<p>From the above structure we should note the following:</p>
<ul class="simple">
<li><p>There are three “top-level” YAML files: <code class="docutils literal notranslate"><span class="pre">train.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">test.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">predict.yaml</span></code></p>
<ul>
<li><p>These stand for each of the available ML operations, and each correspond to a different
CLI call and a <code class="docutils literal notranslate"><span class="pre">hydra</span></code> “config name”</p></li>
</ul>
</li>
<li><p>There are 5 configuration groups (<code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">model</span></code>, <code class="docutils literal notranslate"><span class="pre">trainer</span></code>,
<code class="docutils literal notranslate"><span class="pre">trainer/callbacks</span></code>, <code class="docutils literal notranslate"><span class="pre">mlflow</span></code>), each of which can be modularly and
independently configured.</p>
<ul>
<li><p>Under each of these configuration groups, you can add YAML files
which correspond to a specific way in which to configure that group. E.g.
under <code class="docutils literal notranslate"><span class="pre">model</span></code> you might have different architectures, under <code class="docutils literal notranslate"><span class="pre">data</span></code> you
may have different datasets, and so on.</p></li>
</ul>
</li>
<li><p>This modular form of configuration will make it trivial to swap different configuration
blocks in and out.</p></li>
</ul>
<section id="the-model-config-group">
<h3><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">model</span></code> <strong>config group</strong><a class="headerlink" href="#the-model-config-group" title="Permalink to this headline">#</a></h3>
<p>This is where the available models for training will be specified.
Each configuration file in this group should contain a <code class="docutils literal notranslate"><span class="pre">hydra</span></code> specification of a <a class="reference external" href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.core.LightningModule.html">(LightningModule)</a> model class.</p>
<p>An (incomplete) example of a possible model config could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_target_</span><span class="p">:</span> <span class="n">serotiny</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">TabularVAE</span>
<span class="n">x_dim</span><span class="p">:</span> <span class="mi">100</span>
<span class="n">latent_dim</span><span class="p">:</span> <span class="mi">16</span>
<span class="n">hidden_layers</span><span class="p">:</span> <span class="p">[</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">]</span>
<span class="n">x_label</span><span class="p">:</span> <span class="s2">"x"</span>
<span class="n">optimizer</span><span class="p">:</span>
  <span class="n">_partial_</span><span class="p">:</span> <span class="n">true</span>
  <span class="n">_target_</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">optim</span><span class="o">.</span><span class="n">Adam</span>
  <span class="n">lr</span><span class="p">:</span> <span class="mf">1e-3</span>
</pre></div>
</div>
<p>If you developed your own architecture and want to use it, you can create a config
file for it too, where the value for the <code class="docutils literal notranslate"><span class="pre">_target_</span></code> key would be something like
<code class="docutils literal notranslate"><span class="pre">a_tiny_project.models.MyCustomModel</span></code> - assuming your project is called
<code class="docutils literal notranslate"><span class="pre">a_tiny_project</span></code>, and that it has a module callled <code class="docutils literal notranslate"><span class="pre">models</span></code> which contains a
<code class="docutils literal notranslate"><span class="pre">LightningModule</span></code> subclass, called <code class="docutils literal notranslate"><span class="pre">MyCustomModel</span></code>.</p>
</section>
<section id="the-data-config-group">
<h3><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">data</span></code> <strong>config group</strong><a class="headerlink" href="#the-data-config-group" title="Permalink to this headline">#</a></h3>
<p>This is where the available datasets for training will be specified.
Each configuration file in this group should contain a <code class="docutils literal notranslate"><span class="pre">hydra</span></code> specification of a
<a class="reference external" href="https://pytorch-lightning.readthedocs.io/en/latest/extensions/datamodules.html?highlight=datamodule">LightiningDatamodule</a> datamodule class.</p>
<p>As of now, we only provide a
<a class="reference internal" href="serotiny.datamodules.html#serotiny.datamodules.ManifestDatamodule" title="serotiny.datamodules.ManifestDatamodule"><code class="xref py py-class docutils literal notranslate"><span class="pre">ManifestDatamodule</span> <span class="pre">class</span></code></a> as
part of <code class="docutils literal notranslate"><span class="pre">serotiny</span></code>, which is a class that works on top of what we call manifest
files. These are <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files which describe a dataset, and for which we have
<a class="reference internal" href="serotiny.io.dataframe.loaders.html#module-serotiny.io.dataframe.loaders" title="serotiny.io.dataframe.loaders"><code class="xref py py-mod docutils literal notranslate"><span class="pre">loader</span> <span class="pre">classes</span></code></a> which consume values
from the dataframe, either directly, or e.g. by reading file paths.</p>
<p>Alternatively, you can write and instantiate your own custom datamodule class instead,
or use one developed by someone else.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Pytorch Lightning has a collection of datamodules
(and other useful building blocks) in a package called <code class="docutils literal notranslate"><span class="pre">lightning-bolts</span></code> which you
can install via <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">lightning-bolts</span></code>. See <a class="reference external" href="https://lightning-bolts.readthedocs.io/en/latest/">here</a> for more info about it.</p>
</div>
<p>One (incomplete) example of a datamodule instantiation could be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_target_</span><span class="p">:</span> <span class="n">serotiny</span><span class="o">.</span><span class="n">datamodules</span><span class="o">.</span><span class="n">ManifestDatamodule</span>

<span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">csv</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">csv</span> <span class="c1"># this can either be the path to a .csv file</span>
                              <span class="c1"># or a folder with 3 .csv files named</span>
                              <span class="c1"># "train.csv", "valid.csv", "test.csv"</span>
<span class="n">batch_size</span><span class="p">:</span> <span class="mi">64</span>
<span class="n">num_workers</span><span class="p">:</span> <span class="mi">1</span>
<span class="n">loaders</span><span class="p">:</span>
  <span class="n">x</span><span class="p">:</span>
    <span class="n">_target_</span><span class="p">:</span> <span class="n">serotiny</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">dataframe</span><span class="o">.</span><span class="n">loaders</span><span class="o">.</span><span class="n">LoadColumns</span>
    <span class="n">startswith</span><span class="p">:</span> <span class="n">feature_</span>

<span class="n">split_column</span><span class="p">:</span> <span class="s2">"split"</span>
</pre></div>
</div>
</section>
<section id="the-trainer-config-group">
<h3><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">trainer</span></code> <strong>config group</strong><a class="headerlink" href="#the-trainer-config-group" title="Permalink to this headline">#</a></h3>
<p>Each configuration file in this group should contain a <code class="docutils literal notranslate"><span class="pre">hydra</span></code> specification of a <a class="reference external" href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.trainer.trainer.Trainer.html">Trainer</a></p>
<p>This is the class that governs the training/testing/prediction process. See the
Pytorch Lightning docs for more on its available parameters and functionality.</p>
</section>
<section id="the-trainer-callbacks-config-group">
<h3><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">trainer/callbacks</span></code> <strong>config group</strong><a class="headerlink" href="#the-trainer-callbacks-config-group" title="Permalink to this headline">#</a></h3>
<p>Each configuration file in this group should contain a list of <code class="docutils literal notranslate"><span class="pre">hydra</span></code> specifications of
<a class="reference external" href="https://pytorch-lightning.readthedocs.io/en/latest/api/pytorch_lightning.trainer.trainer.Trainer.html">Callbacks</a>
you want to use during training/testing.</p>
<p>Callbacks are our recommended way of adding functionality to the train/eval loop,
like computing metrics and artifacts, using early-stopping, etc. For functionality
that is project specific, we recommend you implement these as part of your
newly created serotiny project. For general functionality, you can leverage
callbacks from the Pytorch Lightning community, and/or contribute them to
either <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> or Pytorch Lightning.</p>
<p>An example of a list of callbacks would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">_target_</span><span class="p">:</span> <span class="n">pytorch_lightning</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">EarlyStopping</span>
  <span class="n">monitor</span><span class="p">:</span> <span class="n">val_loss</span>
  <span class="n">patience</span><span class="p">:</span> <span class="mi">5</span>
  <span class="n">min_delta</span><span class="p">:</span> <span class="mf">0.1</span>

<span class="o">-</span> <span class="n">_target_</span><span class="p">:</span> <span class="n">a_tiny_project</span><span class="o">.</span><span class="n">callbacks</span><span class="o">.</span><span class="n">YourCustomCallback</span>
  <span class="n">param1</span><span class="p">:</span> <span class="s2">"a"</span>
  <span class="n">param2</span><span class="p">:</span> <span class="s2">"b"</span>
  <span class="n">more_params</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="the-mlflow-config-group">
<h3><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">mlflow</span></code> <strong>config group</strong><a class="headerlink" href="#the-mlflow-config-group" title="Permalink to this headline">#</a></h3>
<p>This config should contain a couple parameters to configure the usage of an MLFlow
server. The three required parameters are: <code class="docutils literal notranslate"><span class="pre">tracking_uri</span></code>, <code class="docutils literal notranslate"><span class="pre">experiment_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">run_name</span></code>.  In MLFlow, an “experiment” is a set
of “runs” - e.g. it might be a set of training runs for the same architecture
with different hyperparameters. Unlike MLFlow, <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> expects run names
to be unique (under a given experiment name). We use this notion to, for example,
restart failed training runs.</p>
<p>Like any parameter in a <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> call, the MLFlow parameters can either be set
in the config file or in the command-line. The value <code class="docutils literal notranslate"><span class="pre">tracking_uri</span></code> is likely
going to remain throughout your project, whereas the <code class="docutils literal notranslate"><span class="pre">experiment_name</span></code> and
<code class="docutils literal notranslate"><span class="pre">run_name</span></code> might change with each different run. For that reason, we recommend
setting the <code class="docutils literal notranslate"><span class="pre">tracking_uri</span></code> argument in <code class="docutils literal notranslate"><span class="pre">config/mlflow/default.yaml</span></code> and
setting <code class="docutils literal notranslate"><span class="pre">experiment_name</span></code> and <code class="docutils literal notranslate"><span class="pre">run_name</span></code> in the command-line, by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ serotiny train ... ++mlflow.experiment_name="Your experiment name" \
++mlflow.run_name="your run name"
</pre></div>
</div>
<p>Additionally, in scenarios such as parameter sweeps, it might be useful to
programatically set the <code class="docutils literal notranslate"><span class="pre">run_name</span></code> as a function of some other configuration
values. In that case, you can set <code class="docutils literal notranslate"><span class="pre">run_name</span></code> in the config file and use
<a class="reference external" href="https://omegaconf.readthedocs.io/en/latest/usage.html#variable-interpolation">OmegaConf’s interpolation syntax</a>
to construct a <code class="docutils literal notranslate"><span class="pre">run_name</span></code> string that is unique for each of your sweep values,
like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>...

run_name: ${model.input_size}_${data.batch_size}_${seed}_${trainer.max_epochs}

...
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Remember: <code class="docutils literal notranslate"><span class="pre">serotiny</span></code> expects <code class="docutils literal notranslate"><span class="pre">run_name</span></code> to be unique for each run under
a given experiment, so if your interpolation logic doesn’t generate different
run names, you will end up always operating over the same run, which is not
what you want.</p>
</div>
<p>Finally, all of the above assumes you have a running MLFlow server.
Check <a class="reference external" href="https://mlflow.org">the MLFlow docs</a> for more info on this.</p>
<p>To just test it out, you can try running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mlflow server --backend-store-uri /a/path/to/store/mlflow/data -p 1234
</pre></div>
</div>
<p>This will start an MLFlow server on port 1234, and store
its data on <code class="docutils literal notranslate"><span class="pre">/a/path/to/store/mlflow/data</span></code>.</p>
</section>
</section>
<section id="train-a-model">
<h2>Train a model<a class="headerlink" href="#train-a-model" title="Permalink to this headline">#</a></h2>
<p>With the above configurations in place, you should be ready to train a model.
You can override configuration parameters in the CLI call, using
<a class="reference external" href="https://hydra.cc/docs/next/advanced/override_grammar/basic/">hydra’s overrides syntax</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ serotiny train model=your_model_config_name data=your_data_config_name \
++seed=1337 ++trainer.max_epochs=10 ++trainer.enable_checkpointing=True \
</pre></div>
</div>
<p>Note the selection of the model and data configurations. If you omit these,
<code class="docutils literal notranslate"><span class="pre">serotiny</span></code> will use the corresponding  <code class="docutils literal notranslate"><span class="pre">default.yaml</span></code> configurations.</p>
<p>Assuming appropriate configuration, you should see the results of your model
training on MLFlow</p>
</section>
<section id="load-a-trained-model">
<h2>Load a trained model<a class="headerlink" href="#load-a-trained-model" title="Permalink to this headline">#</a></h2>
<p>On MLFlow’s dashboard, identify the run id for the model you just trained.
You can now load it e.g. in a Jupyter Notebook by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">serotiny.ml_ops.mlflow_utils</span> <span class="kn">import</span> <span class="n">load_model_from_checkpoint</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">load_model_from_checkpoint</span><span class="p">(</span><span class="n">THE_TRACKING_URI</span><span class="p">,</span> <span class="n">THE_RUN_ID</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cli.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">serotiny CLI</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#project-structure">Project structure</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#the-model-config-group"><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">model</span></code> <strong>config group</strong></a></li>
<li><a class="reference internal" href="#the-data-config-group"><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">data</span></code> <strong>config group</strong></a></li>
<li><a class="reference internal" href="#the-trainer-config-group"><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">trainer</span></code> <strong>config group</strong></a></li>
<li><a class="reference internal" href="#the-trainer-callbacks-config-group"><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">trainer/callbacks</span></code> <strong>config group</strong></a></li>
<li><a class="reference internal" href="#the-mlflow-config-group"><strong>The</strong> <code class="docutils literal notranslate"><span class="pre">mlflow</span></code> <strong>config group</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#train-a-model">Train a model</a></li>
<li><a class="reference internal" href="#load-a-trained-model">Load a trained model</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>